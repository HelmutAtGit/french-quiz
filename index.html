<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>French Conjugation Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 2rem;
    }
    .quiz-container {
      max-width: 700px;
      margin: auto;
      background: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .question {
      margin-bottom: 1.5rem;
    }
    input[type="text"] {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .incorrect {
      border-color: red;
      background-color: #ffe5e5;
    }
    .correct {
      border-color: green;
      background-color: #e5ffe5;
    }
    .result {
      margin-top: 1rem;
      font-weight: bold;
    }
    button {
      padding: 0.5rem 1rem;
      margin-top: 0.5rem;
      margin-right: 1rem;
      border: none;
      background-color: #007BFF;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    h3 {
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <h2>French Conjugation Quiz</h2>

    <form id="quizForm">
      <div id="player1"></div>
      <div id="player2"></div>

      <button type="button" onclick="resetQuiz()">Restart</button>
    </form>

    <div id="result"></div>
  </div>

  <script>
    const sentences = [
      { sentence: "Je _______ [être/to be] en forme.", answer: "suis" },
      { sentence: "Tu _______ [avoir/to have] un stylo ?", answer: "as" },
      { sentence: "Il _______ [faire/to do] un gâteau.", answer: "fait" },
      { sentence: "Nous _______ [aller/to go] au cinéma.", answer: "allons" },
      { sentence: "Elles _______ [vouloir/to want] gagner.", answer: "veulent" },
      { sentence: "Je _______ [lire/to read] un livre.", answer: "lis" },
      { sentence: "Tu _______ [venir/to come] demain ?", answer: "viens" },
      { sentence: "Il _______ [savoir/to know] la réponse.", answer: "sait" },
      { sentence: "Nous _______ [prendre/to take] le train.", answer: "prenons" },
      { sentence: "Elles _______ [choisir/to choose] un film.", answer: "choisissent" }
    ];

    let selectedQuestions;
    let player1Start, player2Start;
    let player1Submitted = false;
    let player2Submitted = false;

    function generateQuiz() {
      selectedQuestions = [];
      const usedIndexes = new Set();
      while (selectedQuestions.length < 5) {
        const idx = Math.floor(Math.random() * sentences.length);
        if (!usedIndexes.has(idx)) {
          usedIndexes.add(idx);
          selectedQuestions.push(sentences[idx]);
        }
      }

      const player1Div = document.getElementById("player1");
      const player2Div = document.getElementById("player2");
      player1Div.innerHTML = "<h3>Player 1 is Helmut</h3>";
      player2Div.innerHTML = "<h3>Player 2 are You</h3>";

      selectedQuestions.forEach((q, i) => {
        player1Div.innerHTML += `
          <div class="question">
            <label>${i + 1}. ${q.sentence}</label>
            <input type="text" name="p1_q${i}">
          </div>`;
        player2Div.innerHTML += `
          <div class="question">
            <label>${i + 1}. ${q.sentence}</label>
            <input type="text" name="p2_q${i}">
          </div>`;
      });

      player1Div.innerHTML += `<button type="button" onclick="checkPlayerAnswers(1)">Submit Helmut</button>`;
      player2Div.innerHTML += `<button type="button" onclick="checkPlayerAnswers(2)">Submit You</button>`;

      player1Start = performance.now();
      player2Start = performance.now();
      player1Submitted = false;
      player2Submitted = false;
      document.getElementById("result").innerHTML = "";
    }

    function checkPlayerAnswers(player) {
      let score = 0;
      const endTime = performance.now();
      let timeTaken = 0;

      selectedQuestions.forEach((q, i) => {
        let input = document.querySelector(`[name='p${player}_q${i}']`);
        if (!input) return;

        if (input.value.trim().toLowerCase() === q.answer) {
          score++;
          input.classList.add("correct");
          input.classList.remove("incorrect");
        } else {
          input.classList.add("incorrect");
          input.classList.remove("correct");
        }
      });

      if (player === 1) {
        timeTaken = ((endTime - player1Start) / 1000).toFixed(2);
        player1Submitted = true;
        document.getElementById("result").innerHTML += `Player 1 (Helmut) Score: ${score}/5 (Time: ${timeTaken}s)<br>`;
      } else {
        timeTaken = ((endTime - player2Start) / 1000).toFixed(2);
        player2Submitted = true;
        document.getElementById("result").innerHTML += `Player 2 (You) Score: ${score}/5 (Time: ${timeTaken}s)<br>`;
      }
    }

    function resetQuiz() {
      document.getElementById("result").innerHTML = "";
      generateQuiz();
    }

    window.onload = generateQuiz;
  </script>
</body>
</html>
